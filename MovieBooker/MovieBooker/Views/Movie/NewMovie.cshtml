@model MovieBooker.Models.MovieAndTheater
@{
    ViewBag.Title = "영화 정보를 기입하여 주세요.";
}

<h2>NewMovie</h2>

<html>
<head>
    <title>영화 등록 </title>

    <script language="javascript">
   
        function NewPopup()
        {
            var sDate = document.getElementById("TXT_StartDay").value;
            var eDate = document.getElementById("TXT_EndDay").value;
            window.open("../Movie/SelectTheater?StartDateTime=" + sDate + "&EndDateTime=" + eDate
                , "", "dialogHeight=50px; dialogWidth=300px; resizable=yes;status=yes");
        }
        function SetimagePath() 
        {
            document.getElementById("hidden_imgPath").value = document.getElementById("file").value;
        }
        function addPlaytime()
        {
            document.getElementById("TXT_playtime").value += document.getElementById("TXT_addplayTime").value + "\n";
            document.getElementById("TXT_addplayTime").value = "";
        }
    </script>
</head>
<body>
    <table>
        @using (Html.BeginForm("NewMovie", "Movie", FormMethod.Post, new { enctype = "multipart/form-data"}))
        {
            <tr>
                <td>영화 제목</td>
                <td>@Html.TextBoxFor(m => m.movie.Moviename)</td>
            </tr>
            <tr>
                <td>상영 시작일시</td>
                <td>@Html.TextBoxFor(m => m.movie.Playstartdatetime, new { id = "TXT_StartDay" })</td>
            </tr>
            <tr>
                <td>상영 종료일시</td>
                <td>@Html.TextBoxFor(m => m.movie.Playenddatetime, new { id = "TXT_EndDay" })</td>
            </tr>
            <tr>
                <td> <button type="button" onclick=NewPopup()>상영관 검색 </button> </td>
                <td>@Html.TextBoxFor(m => m.theater.TheaterID, new { id = "TXT_theaterID", @readonly = true})</td>
            </tr>
            <tr>
                <td>상영관이미지</td>
                <td>
                    @Html.HiddenFor(m => m.movie.Movieposter, new { id = "hidden_imgPath" })
                    <input type="file" name="file" id="file" onchange=SetimagePath() />
                </td>
            </tr>
            <tr>
                <td>관람등급</td>
                <td>@Html.TextBoxFor(m => m.movie.Viewingclass)</td>
            </tr>
            <tr>
                <td>Run Time</td>
                <td>@Html.TextBoxFor(m => m.movie.Runningtime)</td>
            </tr>
            <tr>
                <td>상영 시간 목록</td>
                <td>@Html.TextAreaFor(m => m.PlayDayTimes, new { id = "TXT_playtime" })</td>
                <td><input type="text" id="TXT_addplayTime"/></td>
                
                <td><input type="button" value="추가" onclick=addPlaytime() /></td>
            </tr>
                
            <tr>
                <td><input type="submit" value="추가" /></td>
                <td>
                    <input type="button" value="돌아가기" onclick="location.href='@Url.Action("MovieList", "Movie")'"/>
                </td>
            </tr>
        }

    </table>

</body>
</html>